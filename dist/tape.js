!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(this,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i,r=n(1),a=n(7),u=!1;function s(){if(!u){var t=new Laya.Sprite;(o=new Laya.Sprite).name="tape_main_ui_layer",i=new Laya.Sprite,o.name="tape_top_ui_layer",t.addChild(o),t.addChild(i),Laya.stage.addChild(t),u=!0}}function c(){if(o.numChildren>0&&o.getChildAt(o.numChildren-1)instanceof a.default)return void r.default.focus(!0);r.default.focus(!1)}e.default={refreshFocus:c,addUI:function(t){s(),t&&o.addChild(t),c()},addTopUI:function(t){s(),t&&i.addChild(t),c()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),i=n(0),r=[],a=!1;function u(){return r.length}function s(t){void 0===t&&(t=0);var e=u();return e>t?r[e-1-t]:null}function c(t,e,n){void 0===t&&(t=0),void 0===e&&(e=!1),void 0===n&&(n=null);var o=s(t);o&&o.show(e&&u()>1,n)}function f(t){(t>=u()&&(t=u()-1),t<=0)||(r.splice(u()-t,t).forEach(function(t){t.hide(),t.exit()}),c(0))}e.default={focus:function(t){var e=s();e&&e.focus(t)},navigate:function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=null),new o.default({page:t,params:e,onShow:function(){var t;t=function(){n&&n(!0)},c(0,!0,function(){var e=s(1);e&&(e.hide(),t&&t())})},onLoaded:function(t){var e;a=!1,i.default.addUI(t),e=t,r.push(e)},onLoadProgress:function(t,e){if(a){var n=s();n&&n.nextProgress(e)}}})},pop:function(t){void 0===t&&(t=1),f(t)},popToTop:function(){f(u())},finish:function(t,e){void 0===e&&(e=null);var n=[];r.forEach(function(o){o.canFinish(t,e)&&n.push(o)}),function(t){if(t&&!(t.length<=0)){for(var e=0;u()>1&&e<t.length;e++){var n=t[e];r.splice(r.indexOf(n),1),n.hide(),n.exit()}c(0)}}(n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),i=0,r=0,a=0,u=0;e.initScreen=function(t,e,n){for(var s=[],c=3;c<arguments.length;c++)s[c-3]=arguments[c];a=e,u=n;var f=Laya.Browser.clientHeight/laya.utils.Browser.clientWidth,l=n/e,p=e,d=n;i=0,r=0,Math.abs(f/l-1)>.1&&(f>l?r=((d=e*f)-n)/2:i=((p=n/f)-e)/2),t?Laya3D.init.apply(this,[p,d].concat(s)):Laya.init.apply(this,[p,d].concat(s)),o.initBackground(),Laya.stage.x=i,Laya.stage.y=r,Laya.stage.scaleMode=Laya.Stage.SCALE_EXACTFIT,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE},e.default={getOffestX:function(){return i},getOffestY:function(){return r},getDesignWidth:function(){return a},getDesignHeight:function(){return u}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function o(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(window.hasOwnProperty("wx")&&window.wx.hasOwnProperty(t))return(e=window.wx)[t].apply(e,n)}e.default={isFacebookApp:function(){return window.hasOwnProperty("FBInstant")},execFB:function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(window.hasOwnProperty("FBInstant")&&window.FBInstant.hasOwnProperty(t))return(e=window.FBInstant)[t].apply(e,n)},isWechatApp:function(){return window.hasOwnProperty("wx")},execWX:o,postMessageToWXOpenDataContext:function(t){var e=o("getOpenDataContext");e&&e.postMessage&&e.postMessage(t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=[];e.default={showToast:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=new t;r._on_hide=n,r.toast=t,r.params=e||{};var a=r.fromProps||{alpha:0},u=r.toProps||{alpha:1},s=r.easeIn||Laya.Ease.quintIn,c=r.easeOut||Laya.Ease.quintOut,f=r.duration||500;Object.assign(r,a),r.onShow&&r.onShow(),Laya.Tween.to(r,u,f,s,null,0),Laya.Tween.to(r,a,f,c,Laya.Handler.create(this,function(){r&&(i.splice(i.indexOf(r),1),r._on_hide&&r._on_hide(r.toast),r.onHide&&r.onHide(),r.destroy())}),f),i.push(r),o.default.addTopUI(r)},clearAll:function(){i.splice(0,i.length).forEach(function(t){t._on_hide&&t._on_hide(t.toast),t.onHide&&t.onHide(),t.destroy()})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i={};e.default={showPopup:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=i[t],a=new t;a.popup=t,a.params=e||{},a._onHide=n,r?r.push(a):i[t]=[a],o.default.addUI(a),function(t,e){var n=t.fromProps||{alpha:0},o=t.toProps||{alpha:1},i=t.easeIn||Laya.Ease.quintIn,r=t.duration||500;Object.assign(t,n),Laya.Tween.to(t,o,r,i,Laya.Handler.create(this,function(){e&&e()}))}(a,function(){a.onShow&&a.onShow()})},hidePopup:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=i[t];if(e){var a=r?r.indexOf(e):-1;if(a<0)return;r.splice(a,1),e._onHide&&e._onHide(e.popup,n),e.onHide&&e.onHide(e.popup,n),e.removeSelf&&e.removeSelf(),e.destroy&&e.destroy(),o.default.refreshFocus()}else r&&r.splice(0,r.length).forEach(function(t){!function(t,e){var n=t.fromProps||{alpha:0},o=t.toProps||{alpha:1},i=t.easeOut||Laya.Ease.quintOut,r=t.duration||500;Object.assign(t,o),Laya.Tween.to(t,n,r,i,Laya.Handler.create(this,function(){e&&e()}))}(t,function(t){t._onHide&&t._onHide(t.popup,n),t.onHide&&t.onHide(t.popup,n),t.removeSelf&&t.removeSelf(),t.destroy&&t.destroy(),o.default.refreshFocus()})})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=null,r="#000000";e.initBackground=function(){(i=Laya.stage.getChildByName("tape_background_layer"))||((i=new Laya.Sprite).name="tape_background_layer",Laya.stage.addChild(i)),i.x=-o.default.getOffestX(),i.y=-o.default.getOffestY(),i.width=Laya.stage.width,i.height=Laya.stage.height,i.graphics.clear(),i.graphics.drawRect(0,0,i.width,i.height,r)},e.default={getBgSprite:function(){return i},setBgColor:function(t){r=t,i&&(i.graphics.clear(),i.graphics.drawRect(0,0,i.width,i.height,t))},getBgColor:function(){return r}}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=function(t){function e(e){var n=t.call(this)||this;n._options=null,n._activity=null,n._isShow=!1,n._isFocus=!1,n.visible=!1,n._options=e;var o=n._options.page.res;return o&&o.length>0?Laya.loader.load(o,Laya.Handler.create(n,function(){n._newActivity(),n._onLoaded()}),Laya.Handler.create(n,function(t){n._onLoadProgress(t)},null,!1)):(n._newActivity(),n._onLoaded()),n}return i(e,t),e.prototype._newActivity=function(){this._activity||(this._activity=new this._options.page({page:this._options.page,params:this._options.params}))},e.prototype._onLoaded=function(){this._options.onLoaded&&this._options.onLoaded(this),this.addChild(this._activity),this._activity._create(),this._options.onShow&&this._options.onShow()},e.prototype._onLoadProgress=function(t){this._options.onLoadProgress&&this._options.onLoadProgress(this,t)},e.prototype.nextProgress=function(t){this._activity._nextProgress(t)},e.prototype.canFinish=function(t,e){return t===this._options.page&&(!e||e===this._activity)},e.prototype.show=function(t,e){if(!this.visible&&!this._isShow){this._isShow=!0;var n=this._activity.easeIn||Laya.Ease.linearIn,o=this._activity.duration||0,i=this._activity.fromProps||{},a=this._activity.toProps||{};t&&n&&o>0?(Object.assign(this,i),this._activity._resume(),this.visible=!0,Laya.Tween.to(this,a,o,n,Laya.Handler.create(this,function(){e&&e()}))):(this._activity._resume(),this.visible=!0,e&&e()),r.default.refreshFocus()}},e.prototype.hide=function(){this.visible&&this._isShow&&(this._isShow=!1,this._activity._pause(),this.visible=!1,this.focus(!1))},e.prototype.exit=function(){this._activity._destroy(),this.destroy()},e.prototype.focus=function(t){this._isFocus!==t&&(this._isFocus=t,this._activity._focus(t))},e}(Laya.Component);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getVersion=function(){return"2.0.0"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=!0;e.setDebug=function(t){o=t},e.printDebug=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];o&&console.log.apply(console,["Tape:",t].concat(e))}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),function(t){function e(e,n){!function(t){t.x=t.x+t.width/2-t.pivotX,t.y=t.y+t.height/2-t.pivotY,t.pivot(t.width/2,t.height/2)}(e),Laya.Tween.to(e,{scaleX:n,scaleY:n},t.scaleTime)}function n(n){n.offAll(),n.on(Laya.Event.MOUSE_DOWN,n,function(){return e(n,t.scaleSmalValue)}),n.on(Laya.Event.MOUSE_UP,n,function(){return e(n,t.scaleBigValue)}),n.on(Laya.Event.MOUSE_OUT,n,function(){return e(n,t.scaleBigValue)}),n.on(Laya.Event.CLICK,n,function(){var e;(e=n.sound)?Laya.SoundManager.playSound(e,1):t.clickSound&&Laya.SoundManager.playSound(t.clickSound,1)})}t.clickSound=null,t.scaleTime=100,t.scaleSmalValue=.8,t.scaleBigValue=1,t.bindClick=n;var o=function(t){function e(){var e=t.call(this)||this;return e.sound=null,n(e),e}return i(e,t),e}(Laya.Button);t.btn=o;var r=function(t){function e(){var e=t.call(this)||this;return e.sound=null,n(e),e}return i(e,t),e}(Laya.Image);t.btn_img=r;var a=function(t){function e(){var e=t.call(this)||this;return e.sound=null,n(e),e}return i(e,t),e}(Laya.Label);t.btn_label=a;var u=function(t){function e(){var e=t.call(this)||this;return e.sound=null,n(e),e}return i(e,t),e}(Laya.Sprite);t.btn_sprite=u;var s=function(t){function e(){var e=t.call(this)||this;return e.sound=null,n(e),e}return i(e,t),e}(Laya.Box);t.btn_box=s}(e.runtime||(e.runtime={}))},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),a=function(t){function e(){var e=t.call(this)||this;return e.duration=500,e.ease=null,e.fromProps=null,e.toProps=null,e.onShow=null,e.onHide=null,e.width=Laya.stage.width,e.height=Laya.stage.height,e}return i(e,t),e.show=function(t,e){r.default.showToast(this,t,e)},Object.defineProperty(e.prototype,"ui",{get:function(){return this.getChildByName("_contentView")},set:function(t){this.removeChildren(),t.name="_contentView",this.addChild(t)},enumerable:!0,configurable:!0}),e}(Laya.Sprite);e.default=a},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),a=n(2),u=function(t){function e(){var e=t.call(this)||this;return e.duration=500,e.easeIn=null,e.easeOut=null,e.fromProps=null,e.toProps=null,e.onShow=null,e.onHide=null,e.bgAlpha=.5,e.bgColor="#000000",e.isTranslucent=!1,e.canceledOnTouchOutside=!1,e.width=Laya.stage.width,e.height=Laya.stage.height,setTimeout(function(){return e.initBackground()},0),e}return i(e,t),e.show=function(t,e){r.default.showPopup(this,t,e)},e.hide=function(t){r.default.hidePopup(this,null,t)},Object.defineProperty(e.prototype,"ui",{get:function(){return this.getChildByName("_contentView")},set:function(t){this.removeChildren(),t.name="_contentView",this.addChild(t)},enumerable:!0,configurable:!0}),e.prototype.initBackground=function(){var t=this;if(!this.isTranslucent){var e=new Laya.Sprite;e.alpha=this.bgAlpha,e.graphics.clear(),e.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,this.bgColor),e.x=-a.default.getOffestX(),e.y=-a.default.getOffestY(),e.width=Laya.stage.width,e.height=Laya.stage.height,e.on(Laya.Event.CLICK,this,function(e){t.canceledOnTouchOutside&&t.finish(),e.stopPropagation()}),this.canceledOnTouchOutside&&this.ui&&(this.ui.mouseThrough=!0),this.addChildAt(e,0)}},e.prototype.finish=function(t){void 0===t&&(t=null),r.default.hidePopup(this.popup,this,t)},e}(Laya.Sprite);e.default=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),a=function(t){function e(e){var n=t.call(this)||this;return n.page=null,n.params={},n.duration=0,n.easeIn=null,n.easeOut=null,n.fromProps=null,n.toProps=null,n.onFocus=null,n.onCreate=null,n.onResume=null,n.onPause=null,n.onDestroy=null,n.onNextProgress=null,n.width=Laya.stage.width,n.height=Laya.stage.height,n.params=Object.assign({},e.params||{}),n.page=e.page,n}return i(e,t),e.open=function(t,e){r.default.navigate(this,t,e)},e.finish=function(){r.default.finish(this)},Object.defineProperty(e.prototype,"ui",{get:function(){return this.getChildByName("_contentView")},set:function(t){t.name="_contentView",this.removeChildren(),this.addChild(t)},enumerable:!0,configurable:!0}),e.prototype._focus=function(t){this.onFocus&&this.onFocus(t)},e.prototype._create=function(){this.onCreate&&this.onCreate()},e.prototype._resume=function(){this.onResume&&this.onResume()},e.prototype._pause=function(){this.onPause&&this.onPause()},e.prototype._destroy=function(){this.onDestroy&&this.onDestroy()},e.prototype._nextProgress=function(t){this.onNextProgress&&this.onNextProgress(t)},e.prototype.redirectTo=function(t,e){var n=this;void 0===e&&(e={}),this.navigate(t,e,function(){n.back()})},e.prototype.navigate=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=null),r.default.navigate(t,e,n)},e.prototype.back=function(){r.default.finish(this.page,this)},e.prototype.finish=function(t,e){void 0===e&&(e=null),r.default.finish(t,e)},e.prototype.pop=function(t){void 0===t&&(t=1),r.default.pop(t)},e.prototype.popToTop=function(){r.default.popToTop()},e.res=[],e}(Laya.Component);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="${env}";function i(){return 0===o.indexOf("${")?"development":o}e.default={getEnv:i,setEnv:function(t){o=t},isDev:function(){return"production"!==i()},isProd:function(){return"production"===i()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),i=function(){function t(){}return t.prototype.start=function(t){o.default.execFB("initializeAsync").then(function(){t&&t()})},t.prototype.share=function(t){o.default.execFB("shareAsync",t)},t.prototype.exit=function(){o.default.execFB("quit")},t.prototype.onLoaded=function(){o.default.execFB("startGameAsync")},t.prototype.setLoadingProgress=function(t){o.default.execFB("setLoadingProgress",t)},t}();e.fbPlatform=new i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),i=function(){function t(){}return t.prototype.start=function(t){Laya.MiniAdpter.init(!0),o.default.execWX("showShareMenu",{}),t&&t()},t.prototype.share=function(t){o.default.execWX("shareAppMessage",t)},t.prototype.exit=function(){o.default.execWX("exitMiniProgram")},t.prototype.onLoaded=function(){},t.prototype.setLoadingProgress=function(t){},t}();e.wxPlatform=new i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=null,r=!1;function a(){var t=i.commonRes||[];t.length>0?Laya.loader.load(t,Laya.Handler.create(null,function(){u(),i.onLoaded&&i.onLoaded()}),Laya.Handler.create(this,function(t){i.onLoadProgress&&i.onLoadProgress(t)},null,!1)):(i.onLoadProgress&&i.onLoadProgress(100),i.onLoaded&&i.onLoaded(),u())}function u(){o.default.navigate(i.mainPage)}e.initNavigator=function(t){t&&!r&&((i=t)&&i.fileVersion?(Laya.ResourceVersion.type=Laya.ResourceVersion.FILENAME_VERSION,Laya.ResourceVersion.enable(i.fileVersion,Laya.Handler.create(null,function(){a()}))):a(),r=!0)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,o,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var s,c=[],f=!1,l=-1;function p(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var t=u(p);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||f||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){(function(e,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4+314e4831
 */var o;o=function(){"use strict";function t(t){return"function"==typeof t}var o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,r=void 0,a=void 0,u=function(t,e){h[i]=t,h[i+1]=e,2===(i+=2)&&(a?a(y):b())};var s="undefined"!=typeof window?window:void 0,c=s||{},f=c.MutationObserver||c.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(y,1)}}var h=new Array(1e3);function y(){for(var t=0;t<i;t+=2){(0,h[t])(h[t+1]),h[t]=void 0,h[t+1]=void 0}i=0}var v,_,g,w,b=void 0;function m(t,e){var n=this,o=new this.constructor(O);void 0===o[P]&&D(o);var i=n._state;if(i){var r=arguments[i-1];u(function(){return I(i,o,r,n._result)})}else H(n,o,t,e);return o}function L(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(O);return M(e,t),e}l?b=function(){return e.nextTick(y)}:f?(_=0,g=new f(y),w=document.createTextNode(""),g.observe(w,{characterData:!0}),b=function(){w.data=_=++_%2}):p?((v=new MessageChannel).port1.onmessage=y,b=function(){return v.port2.postMessage(0)}):b=void 0===s?function(){try{var t=Function("return this")().require("vertx");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(y)}:d()}catch(t){return d()}}():d();var P=Math.random().toString(36).substring(2);function O(){}var x=void 0,j=1,S=2,T={error:null};function A(t){try{return t.then}catch(t){return T.error=t,T}}function C(e,n,o){n.constructor===e.constructor&&o===m&&n.constructor.resolve===L?function(t,e){e._state===j?F(t,e._result):e._state===S?B(t,e._result):H(e,void 0,function(e){return M(t,e)},function(e){return B(t,e)})}(e,n):o===T?(B(e,T.error),T.error=null):void 0===o?F(e,n):t(o)?function(t,e,n){u(function(t){var o=!1,i=function(t,e,n,o){try{t.call(e,n,o)}catch(t){return t}}(n,e,function(n){o||(o=!0,e!==n?M(t,n):F(t,n))},function(e){o||(o=!0,B(t,e))},t._label);!o&&i&&(o=!0,B(t,i))},t)}(e,n,o):F(e,n)}function M(t,e){var n,o;t===e?B(t,new TypeError("You cannot resolve a promise with itself")):(o=typeof(n=e),null===n||"object"!==o&&"function"!==o?F(t,e):C(t,e,A(e)))}function E(t){t._onerror&&t._onerror(t._result),V(t)}function F(t,e){t._state===x&&(t._result=e,t._state=j,0!==t._subscribers.length&&u(V,t))}function B(t,e){t._state===x&&(t._state=S,t._result=e,u(E,t))}function H(t,e,n,o){var i=t._subscribers,r=i.length;t._onerror=null,i[r]=e,i[r+j]=n,i[r+S]=o,0===r&&t._state&&u(V,t)}function V(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var o=void 0,i=void 0,r=t._result,a=0;a<e.length;a+=3)o=e[a],i=e[a+n],o?I(n,o,i,r):i(r);t._subscribers.length=0}}function I(e,n,o,i){var r=t(o),a=void 0,u=void 0,s=void 0,c=void 0;if(r){if((a=function(t,e){try{return t(e)}catch(t){return T.error=t,T}}(o,i))===T?(c=!0,u=a.error,a.error=null):s=!0,n===a)return void B(n,new TypeError("A promises callback cannot return that same promise."))}else a=i,s=!0;n._state!==x||(r&&s?M(n,a):c?B(n,u):e===j?F(n,a):e===S&&B(n,a))}var k=0;function D(t){t[P]=k++,t._state=void 0,t._result=void 0,t._subscribers=[]}var N=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(O),this.promise[P]||D(this.promise),o(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?F(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&F(this.promise,this._result))):B(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,o=n.resolve;if(o===L){var i=A(t);if(i===m&&t._state!==x)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===W){var r=new n(O);C(r,t,i),this._willSettleAt(r,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(o(t),e)},t.prototype._settledAt=function(t,e,n){var o=this.promise;o._state===x&&(this._remaining--,t===S?B(o,n):this._result[e]=n),0===this._remaining&&F(o,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;H(t,void 0,function(t){return n._settledAt(j,e,t)},function(t){return n._settledAt(S,e,t)})},t}();var W=function(){function t(e){this[P]=k++,this._result=this._state=void 0,this._subscribers=[],O!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){M(t,e)},function(e){B(t,e)})}catch(e){B(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){throw n})})},t}();return W.prototype.then=m,W.all=function(t){return new N(this,t).promise},W.race=function(t){var e=this;return o(t)?new e(function(n,o){for(var i=t.length,r=0;r<i;r++)e.resolve(t[r]).then(n,o)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},W.resolve=L,W.reject=function(t){var e=new this(O);return B(e,t),e},W._setScheduler=function(t){a=t},W._setAsap=function(t){u=t},W._asap=u,W.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var o=null;try{o=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===o&&!e.cast)return}t.Promise=W},W.Promise=W,W},t.exports=o()}).call(this,n(19),n(18))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(20).polyfill(),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},writable:!0,configurable:!0})},function(t,e,n){"use strict";n(21);var o=n(17),i=n(16),r=n(15),a=n(1),u=n(2),s=n(6),c=n(14),f=n(3),l=n(5),p=n(4),d=n(13),h=n(12),y=n(11),v=n(10),_=n(9),g=n(8);var w={init:function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];_.printDebug("init version:"+g.getVersion()),u.initScreen.apply(void 0,[!1,t,e].concat(n))},init3D:function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];_.printDebug("init version:"+g.getVersion()),u.initScreen.apply(void 0,[!0,t,e].concat(n))},start:function(t){var e={mainPage:t.mainPage,commonRes:t.commonRes,fileVersion:t.fileVersion,onLoadProgress:function(e){f.default.isFacebookApp()?r.fbPlatform.setLoadingProgress(e):f.default.isWechatApp()&&i.wxPlatform.setLoadingProgress(e),t.onLoadProgress&&t.onLoadProgress(e)},onLoaded:function(){f.default.isFacebookApp()?r.fbPlatform.onLoaded():f.default.isWechatApp()&&i.wxPlatform.onLoaded(),t.onLoaded&&t.onLoaded()}},n=function(){o.initNavigator(e)};f.default.isFacebookApp()?r.fbPlatform.start(n):f.default.isWechatApp()?i.wxPlatform.start(n):n&&n()},share:function(t){f.default.isFacebookApp()?r.fbPlatform.share(t):f.default.isWechatApp()&&i.wxPlatform.share(t)},exit:function(){f.default.isFacebookApp()?r.fbPlatform.exit():f.default.isWechatApp()&&i.wxPlatform.exit()},setDebug:_.setDebug,getVersion:g.getVersion,bg:s.default,screen:u.default,platform:f.default,env:c.default,navigator:a.default,popup:l.default,toast:p.default,Activity:d.default,PopupView:h.default,ToastView:y.default};"undefined"!=typeof window&&(window.Tape=w,window.runtime=v.runtime),t.exports={Tape:w,runtime:v.runtime}}])});
//# sourceMappingURL=tape.js.map